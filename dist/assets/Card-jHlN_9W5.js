import{o as s,s as r,b as a,K as _,b5 as v,m as h,a as u,w as m,b0 as o,F as g,u as b,t as i,bv as y,e as k}from"./index-D2l_AIdw.js";import{_ as p}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={name:"Card",props:{labels:Object,fields:Object,isCardNumberMasked:Boolean,randomBackgrounds:{type:Boolean,default:!0},backgroundImage:[String,Object],currentPlaceholder:String},data(){return{focusElementStyle:null,currentFocus:null,isFocused:!1,isCardFlipped:!1}},watch:{currentFocus(){this.currentFocus?this.changeFocus():this.focusElementStyle=null},cardType(){this.changePlaceholder()}},mounted(){let t=this;document.querySelectorAll("[data-card-field]").forEach(e=>{e.addEventListener("focus",()=>{this.isFocused=!0,e.id===this.fields.cardYear||e.id===this.fields.cardMonth?this.currentFocus="cardDate":this.currentFocus=e.id,this.isCardFlipped=e.id===this.fields.cardCvv}),e.addEventListener("blur",()=>{this.isCardFlipped=!e.id===this.fields.cardCvv,setTimeout(()=>{t.isFocused||(t.currentFocus=null)},300),t.isFocused=!1})})},computed:{cardType(){let t=this.labels.cardNumber,c=new RegExp("^4");return t.match(c)!=null?"visa":(c=new RegExp("^(34|37)"),t.match(c)!=null?"amex":(c=new RegExp("^5[1-5]"),t.match(c)!=null?"mastercard":(c=new RegExp("^6011"),t.match(c)!=null?"discover":(c=new RegExp("^62"),t.match(c)!=null?"unionpay":(c=new RegExp("^9792"),t.match(c)!=null?"troy":(c=new RegExp("^3(?:0([0-5]|9)|[689]\\d?)\\d{0,11}"),t.match(c)!=null?"dinersclub":(c=new RegExp("^35(2[89]|[3-8])"),t.match(c)!=null?"jcb":"")))))))},currentCardBackground(){return this.randomBackgrounds&&!this.backgroundImage?`https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/${Math.floor(Math.random()*25+1)}.jpeg`:this.backgroundImage?this.backgroundImage:null}},methods:{changeFocus(){let t=this.$refs[this.currentFocus];this.focusElementStyle=t?{width:`${t.offsetWidth}px`,height:`${t.offsetHeight}px`,transform:`translateX(${t.offsetLeft}px) translateY(${t.offsetTop}px)`}:null},getIsNumberMasked(t,c){return t>4&&t<14&&this.labels.cardNumber.length>t&&c.trim()!==""&&this.isCardNumberMasked}}},E={class:"card-item__side -front"},F={class:"card-item__cover"},N=["src"],w={class:"card-item__wrapper"},I={class:"card-item__top"},M=a("img",{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png",class:"card-item__chip"},null,-1),T={class:"card-item__type"},B=["src"],x=["for"],S={key:0,class:"card-item__numberItem"},R={class:"card-item__content"},Y=["for"],V=a("div",{class:"card-item__holder"},"Card Holder",-1),j={class:"card-item__name",key:"1"},P={class:"card-item__name",key:"2"},L={class:"card-item__date",ref:"cardDate"},D=["for"],O=["for"],z={key:"2"},H={for:"cardYear",class:"card-item__dateItem"},q={key:"2"},A={class:"card-item__side -back"},G={class:"card-item__cover"},K=["src"],W=a("div",{class:"card-item__band"},null,-1),X={class:"card-item__cvv"},J=a("div",{class:"card-item__cvvTitle"},"CVV",-1),Q={class:"card-item__cvvBand"},U={class:"card-item__type"},Z=["src"];function $(t,c,e,ee,f,d){return s(),r("div",{class:_(["card-item",{"-active":f.isCardFlipped}])},[a("div",E,[a("div",{class:_(["card-item__focus",{"-active":f.focusElementStyle}]),style:v(f.focusElementStyle),ref:"focusElement"},null,6),a("div",F,[d.currentCardBackground?(s(),r("img",{key:0,src:d.currentCardBackground,class:"card-item__bg"},null,8,N)):h("",!0)]),a("div",w,[a("div",I,[M,a("div",T,[u(o,{name:"slide-fade-up"},{default:m(()=>[d.cardType?(s(),r("img",{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+d.cardType+".png",key:d.cardType,alt:"",class:"card-item__typeImg"},null,8,B)):h("",!0)]),_:1})])]),a("label",{for:e.fields.cardNumber,class:"card-item__number",ref:e.fields.cardNumber},[(s(!0),r(g,null,b(e.currentPlaceholder,(n,l)=>(s(),r("span",{key:l},[u(o,{name:"slide-fade-up"},{default:m(()=>[d.getIsNumberMasked(l,n)?(s(),r("div",S,"*")):e.labels.cardNumber.length>l?(s(),r("div",{class:_(["card-item__numberItem",{"-active":n.trim()===""}]),key:e.currentPlaceholder},i(e.labels.cardNumber[l]),3)):(s(),r("div",{class:_(["card-item__numberItem",{"-active":n.trim()===""}]),key:e.currentPlaceholder+1},i(n),3))]),_:2},1024)]))),128))],8,x),a("div",R,[a("label",{for:e.fields.cardName,class:"card-item__info",ref:e.fields.cardName},[V,u(o,{name:"slide-fade-up"},{default:m(()=>[e.labels.cardName.length?(s(),r("div",j,[u(y,{name:"slide-fade-right"},{default:m(()=>[(s(!0),r(g,null,b(e.labels.cardName.replace(/\s\s+/g," "),(n,l)=>(s(),r("span",{class:"card-item__nameItem",key:l+1},i(n),1))),128))]),_:1})])):(s(),r("div",P,i(t.$t("card.fullName")),1))]),_:1})],8,Y),a("div",L,[a("label",{for:e.fields.cardMonth,class:"card-item__dateTitle"},"Expires",8,D),a("label",{for:e.fields.cardMonth,class:"card-item__dateItem"},[u(o,{name:"slide-fade-up"},{default:m(()=>[e.labels.cardMonth?(s(),r("span",{key:e.labels.cardMonth},i(e.labels.cardMonth),1)):(s(),r("span",z,i(t.$t("card.MM")),1))]),_:1})],8,O),k(" / "),a("label",H,[u(o,{name:"slide-fade-up"},{default:m(()=>[e.labels.cardYear?(s(),r("span",{key:e.labels.cardYear},i(String(e.labels.cardYear).slice(2,4)),1)):(s(),r("span",q,i(t.$t("card.YY")),1))]),_:1})])],512)])])]),a("div",A,[a("div",G,[d.currentCardBackground?(s(),r("img",{key:0,src:d.currentCardBackground,class:"card-item__bg"},null,8,K)):h("",!0)]),W,a("div",X,[J,a("div",Q,[(s(!0),r(g,null,b(e.labels.cardCvv,(n,l)=>(s(),r("span",{key:l},"*"))),128))]),a("div",U,[d.cardType?(s(),r("img",{key:0,src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+d.cardType+".png",class:"card-item__typeImg"},null,8,Z)):h("",!0)])])])],2)}const se=p(C,[["render",$]]);export{se as C};
