import{Q as s}from"./index-CzOznYKU.js";const f={get:r("GET"),post:r("POST"),put:r("PUT"),delete:r("DELETE")};function r(e){return(t,n)=>{const o={method:e,headers:u(t)};return n&&(o.headers["Content-Type"]="application/json",o.body=JSON.stringify(n)),fetch(t,o).then(c)}}function u(e){const{user:t}=s(),n=!!(t!=null&&t.token);console.log(t.token);const o=e.startsWith("http://localhost:3000/api");return n&&o?{Authorization:`Bearer ${t.token}`}:{}}function c(e){return e.text().then(t=>{const n=t&&JSON.parse(t);if(!e.ok){const{user:o,logout:i}=s();[401,403].includes(e.status)&&o&&i();const a=n&&n.message||e.statusText;return Promise.reject(a)}return n})}export{f};
