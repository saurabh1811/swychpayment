import{T as O,_ as P,s as F,a as s,b,c as j,d as L,e as H,f as v,g as D,h as W,i as k,j as Q}from"./index-BYFCpf-x.js";import{H as i,a6 as K,o as h,c as N,w as l,s as X,a as t,z as a,b as p,d as c,t as u,aj as d,ak as m,p as z}from"./index-CzOznYKU.js";import"./fetch-wrapper-BzEQRETp.js";const J={key:0,class:"p-4"},q={class:"flex justify-between"},G={class:"flex items-center gap-2"},Y={class:"flex items-center gap-2"},le={__name:"FiatPassbook",setup(Z){const x=i(new Array(10)),$=i(["Processed","Pending","Rejected"]),C=i([{name:"Credit",type:"credit"},{name:"Debit",type:"debit"}]),f=i(!0),g=i(),_=i(),y=i(),S=i(null),V=i(null),w=i(null);i([{name:"Amy Elsner",image:"amyelsner.png"},{name:"Anna Fali",image:"annafali.png"},{name:"Asiya Javayant",image:"asiyajavayant.png"},{name:"Bernardo Dominic",image:"bernardodominic.png"},{name:"Elwin Sharvill",image:"elwinsharvill.png"},{name:"Ioni Bowcher",image:"ionibowcher.png"},{name:"Ivan Magalhaes",image:"ivanmagalhaes.png"},{name:"Onyama Limba",image:"onyamalimba.png"},{name:"Stephen Shaw",image:"stephenshaw.png"},{name:"XuXue Feng",image:"xuxuefeng.png"}]),K(async()=>{try{const o=await O.getWalletTransactions();console.log(o.data),g.value=R(o.data.data)}catch(o){console.error("Error fetching transactions:",o)}finally{f.value=!1}});const U=()=>{y.value={global:{value:null,matchMode:d.CONTAINS},"attributes.transaction_id":{operator:m.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"attributes.created_at":{operator:m.AND,constraints:[{value:null,matchMode:d.DATE_IS}]},"attributes.amount":{operator:m.AND,constraints:[{value:null,matchMode:d.EQUALS}]},"attributes.net_bal":{operator:m.AND,constraints:[{value:null,matchMode:d.EQUALS}]},"attributes.remarks":{operator:m.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"attributes.purpose":{operator:m.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"attributes.status":{operator:m.OR,constraints:[{value:null,matchMode:d.EQUALS}]},"attributes.transaction_type":{value:null,matchMode:d.IN}}};U();const I=o=>o.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),T=o=>o.toLocaleString("en-US",{style:"currency",currency:"USD"}),M=()=>{U(),S.value&&(V.value=null,w.value=null)},R=o=>[...o||[]].map(n=>(n.attributes.created_at=new Date(n.attributes.created_at),n)),A=o=>{switch(o){case 0:return"info";case 1:return"success";case 2:return"danger";case 3:return"danger";default:return"info"}},B=o=>{switch(o){case 0:return"Pending";case 1:return"Processed";case 2:return"Rejected";case 3:return"Rejected";default:return"Pending"}};return(o,n)=>{const E=z("Select");return h(),N(P,{title:"PUSD Transactions","class-name":"px-0 rounded-md overflow-hidden"},{default:l(()=>[f.value?(h(),X("div",J,[t(a(F),{value:x.value},{default:l(()=>[t(a(s),{field:"transaction_id",header:"Transaction Id"},{body:l(()=>[t(a(b))]),_:1}),t(a(s),{field:"amount",header:"Amount"},{body:l(()=>[t(a(b))]),_:1}),t(a(s),{field:"net_bal",header:"Net Bal"},{body:l(()=>[t(a(b))]),_:1}),t(a(s),{field:"remarks",header:"Remark"},{body:l(()=>[t(a(b))]),_:1}),t(a(s),{field:"purpose",header:"Purpose"},{body:l(()=>[t(a(b))]),_:1})]),_:1},8,["value"])])):(h(),N(a(F),{key:1,ref_key:"dataTable",ref:S,filters:y.value,"onUpdate:filters":n[3]||(n[3]=e=>y.value=e),selection:_.value,"onUpdate:selection":n[4]||(n[4]=e=>_.value=e),value:g.value,paginator:"",rows:10,dataKey:"id",filterDisplay:"menu",globalFilterFields:["id","attributes.transaction_id","attributes.amount"],sortField:V.value,sortOrder:w.value},{header:l(()=>[p("div",q,[t(a(j),{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:n[0]||(n[0]=e=>M())}),t(a(L),null,{default:l(()=>[t(a(H),null,{default:l(()=>n[5]||(n[5]=[p("i",{class:"pi pi-search"},null,-1)])),_:1}),t(a(v),{modelValue:y.value.global.value,"onUpdate:modelValue":n[1]||(n[1]=e=>y.value.global.value=e),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:l(()=>n[6]||(n[6]=[c(" No transaction found. ")])),default:l(()=>[t(a(s),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(a(s),{field:"attributes.transaction_id",header:"Transaction Id",sortable:"",style:{"min-width":"14rem"}},{body:l(({data:e})=>[c(u(e.attributes.transaction_id),1)]),filter:l(({filterModel:e})=>[t(a(v),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,type:"text",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(a(s),{field:"attributes.amount",header:"Amount",sortable:"",filterField:"attributes.amount",dataType:"numeric",style:{"min-width":"10rem"}},{body:l(({data:e})=>[c(u(T(e.attributes.amount)),1)]),filter:l(({filterModel:e})=>[t(a(D),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(a(s),{field:"attributes.net_bal",header:"Net Bal",sortable:"",filterField:"attributes.net_bal",dataType:"numeric",style:{"min-width":"10rem"}},{body:l(({data:e})=>[c(u(T(e.attributes.net_bal)),1)]),filter:l(({filterModel:e})=>[t(a(D),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(a(s),{field:"attributes.remarks",header:"Remark",sortable:"",filterField:"attributes.remarks",style:{"min-width":"10rem"}},{body:l(({data:e})=>[c(u(e.attributes.remarks),1)]),filter:l(({filterModel:e})=>[t(a(v),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,type:"text",placeholder:"Search by remarks"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(a(s),{field:"attributes.purpose",header:"Purpose",sortable:"",filterField:"attributes.purpose",style:{"min-width":"10rem"}},{body:l(({data:e})=>[c(u(e.attributes.purpose),1)]),filter:l(({filterModel:e})=>[t(a(v),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,type:"text",placeholder:"Search by purpose"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(a(s),{header:"Type",sortable:"",sortField:"attributes.transaction_type",filterField:"attributes.transaction_type",showFilterMatchModes:!1,filterMenuStyle:{width:"8rem"},style:{"min-width":"8rem"}},{body:l(({data:e})=>[p("div",G,[p("span",null,u(e.attributes.transaction_type),1)])]),filter:l(({filterModel:e})=>[t(a(W),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,options:C.value,optionLabel:"name",optionValue:"name",placeholder:"Any",onChange:n[2]||(n[2]=r=>console.log("Selected Transaction Types:",r.value))},{option:l(r=>[p("div",Y,[p("span",null,u(r.option.name),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(a(s),{header:"Status",field:"data.attributes.status",sortable:"",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:l(({data:e})=>[t(a(k),{value:e.attributes.status,severity:A(e.attributes.status)},{default:l(()=>[c(u(B(e.attributes.status)),1)]),_:2},1032,["value","severity"])]),filter:l(({filterModel:e})=>[t(E,{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,options:$.value,placeholder:"Select One",showClear:""},{option:l(r=>[t(a(k),{value:r.option,severity:A(r.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(a(s),{field:"attributes.created_at",header:"Created At",sortable:"",filterField:"attributes.created_at",dataType:"date",style:{"min-width":"10rem"}},{body:l(({data:e})=>[c(u(I(e.attributes.created_at)),1)]),filter:l(({filterModel:e})=>[t(a(Q),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["filters","selection","value","sortField","sortOrder"]))]),_:1})}}};export{le as default};
