import{o as s,s as d,b as r,K as _,am as v,m as h,a as u,w as m,an as o,F as g,u as b,t as i,ao as y,d as k}from"./index-CzOznYKU.js";import{_ as p}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={name:"Card",props:{labels:Object,fields:Object,isCardNumberMasked:Boolean,randomBackgrounds:{type:Boolean,default:!0},backgroundImage:[String,Object],currentPlaceholder:String},data(){return{focusElementStyle:null,currentFocus:null,isFocused:!1,isCardFlipped:!1}},watch:{currentFocus(){this.currentFocus?this.changeFocus():this.focusElementStyle=null},cardType(){this.changePlaceholder()}},mounted(){let a=this;document.querySelectorAll("[data-card-field]").forEach(t=>{t.addEventListener("focus",()=>{this.isFocused=!0,t.id===this.fields.cardYear||t.id===this.fields.cardMonth?this.currentFocus="cardDate":this.currentFocus=t.id,this.isCardFlipped=t.id===this.fields.cardCvv}),t.addEventListener("blur",()=>{this.isCardFlipped=!t.id===this.fields.cardCvv,setTimeout(()=>{a.isFocused||(a.currentFocus=null)},300),a.isFocused=!1})})},computed:{cardType(){let a=this.labels.cardNumber,e=new RegExp("^4");return a.match(e)!=null?"visa":(e=new RegExp("^(34|37)"),a.match(e)!=null?"amex":(e=new RegExp("^5[1-5]"),a.match(e)!=null?"mastercard":(e=new RegExp("^6011"),a.match(e)!=null?"discover":(e=new RegExp("^62"),a.match(e)!=null?"unionpay":(e=new RegExp("^9792"),a.match(e)!=null?"troy":(e=new RegExp("^3(?:0([0-5]|9)|[689]\\d?)\\d{0,11}"),a.match(e)!=null?"dinersclub":(e=new RegExp("^35(2[89]|[3-8])"),a.match(e)!=null?"jcb":"")))))))},currentCardBackground(){return this.randomBackgrounds&&!this.backgroundImage?`https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/${Math.floor(Math.random()*25+1)}.jpeg`:this.backgroundImage?this.backgroundImage:null}},methods:{changeFocus(){let a=this.$refs[this.currentFocus];this.focusElementStyle=a?{width:`${a.offsetWidth}px`,height:`${a.offsetHeight}px`,transform:`translateX(${a.offsetLeft}px) translateY(${a.offsetTop}px)`}:null},getIsNumberMasked(a,e){return a>4&&a<14&&this.labels.cardNumber.length>a&&e.trim()!==""&&this.isCardNumberMasked}}},E={class:"card-item__side -front"},F={class:"card-item__cover"},N=["src"],w={class:"card-item__wrapper"},I={class:"card-item__top"},M={class:"card-item__type"},T=["src"],B=["for"],x={key:0,class:"card-item__numberItem"},S={class:"card-item__content"},R=["for"],Y={class:"card-item__name",key:"1"},V={class:"card-item__name",key:"2"},j={class:"card-item__date",ref:"cardDate"},P=["for"],L=["for"],D={key:"2"},O={for:"cardYear",class:"card-item__dateItem"},z={key:"2"},H={class:"card-item__side -back"},q={class:"card-item__cover"},A=["src"],G={class:"card-item__cvv"},K={class:"card-item__cvvBand"},W={class:"card-item__type"},X=["src"];function J(a,e,t,Q,f,c){return s(),d("div",{class:_(["card-item",{"-active":f.isCardFlipped}])},[r("div",E,[r("div",{class:_(["card-item__focus",{"-active":f.focusElementStyle}]),style:v(f.focusElementStyle),ref:"focusElement"},null,6),r("div",F,[c.currentCardBackground?(s(),d("img",{key:0,src:c.currentCardBackground,class:"card-item__bg"},null,8,N)):h("",!0)]),r("div",w,[r("div",I,[e[0]||(e[0]=r("img",{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png",class:"card-item__chip"},null,-1)),r("div",M,[u(o,{name:"slide-fade-up"},{default:m(()=>[c.cardType?(s(),d("img",{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+c.cardType+".png",key:c.cardType,alt:"",class:"card-item__typeImg"},null,8,T)):h("",!0)]),_:1})])]),r("label",{for:t.fields.cardNumber,class:"card-item__number",ref:t.fields.cardNumber},[(s(!0),d(g,null,b(t.currentPlaceholder,(n,l)=>(s(),d("span",{key:l},[u(o,{name:"slide-fade-up"},{default:m(()=>[c.getIsNumberMasked(l,n)?(s(),d("div",x,"*")):t.labels.cardNumber.length>l?(s(),d("div",{class:_(["card-item__numberItem",{"-active":n.trim()===""}]),key:t.currentPlaceholder},i(t.labels.cardNumber[l]),3)):(s(),d("div",{class:_(["card-item__numberItem",{"-active":n.trim()===""}]),key:t.currentPlaceholder+1},i(n),3))]),_:2},1024)]))),128))],8,B),r("div",S,[r("label",{for:t.fields.cardName,class:"card-item__info",ref:t.fields.cardName},[e[1]||(e[1]=r("div",{class:"card-item__holder"},"Card Holder",-1)),u(o,{name:"slide-fade-up"},{default:m(()=>[t.labels.cardName.length?(s(),d("div",Y,[u(y,{name:"slide-fade-right"},{default:m(()=>[(s(!0),d(g,null,b(t.labels.cardName.replace(/\s\s+/g," "),(n,l)=>(s(),d("span",{class:"card-item__nameItem",key:l+1},i(n),1))),128))]),_:1})])):(s(),d("div",V,i(a.$t("card.fullName")),1))]),_:1})],8,R),r("div",j,[r("label",{for:t.fields.cardMonth,class:"card-item__dateTitle"},"Expires",8,P),r("label",{for:t.fields.cardMonth,class:"card-item__dateItem"},[u(o,{name:"slide-fade-up"},{default:m(()=>[t.labels.cardMonth?(s(),d("span",{key:t.labels.cardMonth},i(t.labels.cardMonth),1)):(s(),d("span",D,i(a.$t("card.MM")),1))]),_:1})],8,L),e[2]||(e[2]=k(" / ")),r("label",O,[u(o,{name:"slide-fade-up"},{default:m(()=>[t.labels.cardYear?(s(),d("span",{key:t.labels.cardYear},i(String(t.labels.cardYear).slice(2,4)),1)):(s(),d("span",z,i(a.$t("card.YY")),1))]),_:1})])],512)])])]),r("div",H,[r("div",q,[c.currentCardBackground?(s(),d("img",{key:0,src:c.currentCardBackground,class:"card-item__bg"},null,8,A)):h("",!0)]),e[4]||(e[4]=r("div",{class:"card-item__band"},null,-1)),r("div",G,[e[3]||(e[3]=r("div",{class:"card-item__cvvTitle"},"CVV",-1)),r("div",K,[(s(!0),d(g,null,b(t.labels.cardCvv,(n,l)=>(s(),d("span",{key:l},"*"))),128))]),r("div",W,[c.cardType?(s(),d("img",{key:0,src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+c.cardType+".png",class:"card-item__typeImg"},null,8,X)):h("",!0)])])])],2)}const $=p(C,[["render",J]]);export{$ as C};
